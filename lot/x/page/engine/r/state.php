<?php $path=$url['path']??"";$i=$url['i']??"";$p=trim($state->path??"",'/');$folder=LOT.DS.'page'.DS.$path;if(""!==$i&&File::exist([$folder.DS.$i.'.archive',$folder.DS.$i.'.page'])){$path.='/'.$i;$folder.=DS.$i;$url->i=null;$url->path='/'.$path;$i="";}$if_0=""===$i&&(""===$path||$path===$p);$if_1=File::exist([LOT.DS.'page'.DS.$p.'.archive',LOT.DS.'page'.DS.$p.'.page']);$if_2=File::exist([$folder.DS.'.archive',$folder.DS.'.page']);$if_3=File::exist([$folder.'.archive',$folder.'.page']);$if_4=glob(LOT.DS.'page'.DS.$p.DS.'*.page',GLOB_NOSORT);$if_5=glob($folder.DS.'*.page',GLOB_NOSORT);$folder=dirname($folder);$if_6=File::exist([$folder.'.archive',$folder.'.page',$folder.DS.'.archive',$folder.DS.'.page']);State::set('is',['error'=>""===$path&&!$if_1||""!==$path&&!$if_3?404:false,'home'=>$if_0,'page'=>""===$path&&$if_1||""!==$path&&($if_2||$if_3&&!$if_5),'pages'=>""!==$i||""===$path&&$if_4||""!==$path&&!$if_2&&$if_5]);$count=count(""===$path?$if_4:$if_5);State::set('has',['next'=>State::is('pages')&&($count>(($i?:1)*($state->chunk??5))),'page'=>""===$path&&$if_1||$if_3,'pages'=>$count>0,'parent'=>false!==strpos($path,'/'),'prev'=>State::is('pages')&&$i>1,'i'=>State::is('pages')&&""!==$i]);State::set(['are'=>[],'can'=>[],'not'=>[]]);