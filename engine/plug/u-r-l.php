<?php URL::_('long',function(string $value,$ground=true,URL $url=null){$url=$url??$GLOBALS['url'];$d=is_string($ground)?$ground:$url->{$ground?'ground':'root'};if(0===strpos($value,'//')){return rtrim(substr($url->protocol,0,-2).$value,'/');}if('.'===$value||0===strpos($value,'./')){$value=substr($value,1);}if(0===strpos($value,'/')){if(false!==strpos('?&#',$value[1]??P)){$value=substr($value,1);}if(0===strpos($value,'&')){$value='?'.substr($value,1);}return rtrim($d.$value,'/');}if(false===strpos($value,'://')&&0!==strpos($value,'blob:')&&0!==strpos($value,'data:')&&0!==strpos($value,'javascript:')&&0!==strpos($value,'mailto:')&&!is_string($ground)){$d=strtok($url->current,'?&#');if($value&&false===strpos('.?&#',$value[0])){$d=dirname($d);}if(0!==($count=substr_count($value.'/','../'))){$d=dirname($d,$count);$value=strtr($value.'/',['../'=>""]);}return strtr(rtrim($d.'/'.trim($value,'/'),'/'),['/?'=>'?','/&'=>'?','/#'=>'#']);}return $value;});URL::_('short',function(string $value,$ground=true,URL $url=null){$url=$url??$GLOBALS['url'];$d=is_string($ground)?$ground:$url->{$ground?'ground':'root'};if(0===strpos($value,'//')){if(0!==strpos($value,'//'.$url->host)){return $value;}$value=$url->protocol.substr($value,2);}else{if(0!==strpos($value,$url."")){return $value;}}$value=substr($value,strlen(rtrim($d,'/')));return!is_string($ground)&&$ground&&""===$value?'/':$value;});